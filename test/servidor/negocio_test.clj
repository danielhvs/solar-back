(ns servidor.negocio-test
  (:require [clojure.test :refer :all]
            [servidor.negocio :as n]))

(declare descricao)

(deftest tempo-garantia-test
  (testing "Regra tempo de garantia de acordo com o fabricante"
    (is (= 10 (n/tempo-garantia "GROWATT")))
    (is (= 7 (n/tempo-garantia "FRONIUS")))
    (is (= 5 (n/tempo-garantia "QUALQUER OUTRO")))))

(deftest composicao-test
  (let [d descricao]
    (testing "caso real"
      (is (= ["O gerador de energia fotovoltaico de 1,5 kWp é composto por:\n"
              "4 STAUBLI CONECTOR MC4 320016P0001-UR PV-KBT4/6II-UR ACOPLADOR FEMEA\n"
              "4 STAUBLI CONECTOR MC4 32.0017P0001-UR PV-KST4/6II-UR ACOPLADOR MACHO\n"
              "1 INVERSOR SOLAR REFUSOL 801P1K6100 1.6KW MONOFASICO 220V 1MPPT MONITORAMENTO WLAN\n"
              "1 STRING BOX CLAMPER 015097 QUADRO 2 ENTRADAS 2 SAIDAS 1000V (1 MPPT)\n"
              "4 PAINEL SOLAR TRINA TSM-DE08MII 375W HONEY 120 CEL. MONO PERC HALF CELL 20,5% EFICIENCIA\n"
              "50 CABO SOLAR CORDEIRO R50 CORTOX SOLAR FLEX 1KV 1500V C5 NBL 1X6,00 PRETO\n"
              "50 CABO SOLAR CORDEIRO R50 CORTOX SOLAR FLEX 1KV 1500V C5 NBL 1X6,00 VERMELHO\n"]
             (n/composicao d))))))

(def descricao "<h3><strong> Gerador de Energia Fotovoltaico com potência de 1,5 kWp  </strong></h3><br><h4><strong> Principais recursos do painel </strong></h4><br><p>Eficiência média da célula de 20,5% <br> 120 meia células fotovoltaicas monocristalinas<br> Tecnologia MBB (Multi Busbar) trazendo mais economia<br> Resistência PID garantida através do processo de controle de célula do material do módulo, resistente a sal, ácido e amônia<br> Baixos coeficientes térmicos para maior produção de energia em alta temperatura de operação<br> Garantia de 12 anos para o produto e Garantia linear de 25 anos </p><br><h4><strong> Certificações </strong></h4><br><p>IEC 61215, IEC 61730, IEC 61701, IRC 62716<br> ISO 9001, ISO 14001, ISO 14064, ISO 45001</p><br><h5><strong> Dados elétricos </strong></h5><br><p>Potência no ponto máximo de potência - 375W <br> Tensão no ponto máximo de potência - 34,4V<br> Corrente no ponto máximo de potência - 10,89A<br> Tensão em Circuito Aberto - 41,6V<br> Corrente de Curto Circuito - 11,45A<br> Eficiência = 20,5%<br> Tolerância de potencias +5W<br> Desempenho mínimo sob condições de teste padrão STC (1000 W/m², Temperatura da célula 25°C, Massa de ar AM 1,5)</p><br><h5><strong> Características de temperatura </strong></h5><br><p>Coeficiente de temperatura (Pmax) -0.34% / °C<br> Coeficiente de temperatura (Voc) -0.25 % / °C<br> Coeficiente de temperatura (Isc) 0.04 % / °C<br> Temperatura nominal da célula (NOCT) 43±2°C<br> Temperatura Admissível para o Módulo em Operação Contínua -40 °C até +85 °C<br> Tensão máxima do sistema 1500VDC<br> Fusível máximo 20A</p><br><h5><strong> Informações do Inversor </strong></h5><br><h5><strong> Dados de entrada: </strong></h5><br><p>Máx. potência pico STC 2,4KWp<br> Tensão máx. de entrada 500 VCC<br> Área de tensão MPP 150~450 VCC<br> Tensão nominal de entrada 360 VCC<br> Corrente DC por MPPT 12A <br> Corrente máxima de curto-circuito 15A<br> Rastreadores de MPP 1</p><br><h5><strong> Dados de saída </strong></h5><br><p>Potência nominal de saída 1,6KW<br> Tensão nominal 220, 230, 240 VCA<br> Faixa de tensão CA 180V~276<br> Frequência nominal 50, 60Hz<br> Faixa de frequência 47~55 / 54~66<br> Corrente máx. de saída 7,7A<br> Eficiência máxima 97.5%<br> THDi <3%<br> Grau de proteção IP65</p><br><h5><strong> Monitoramento </strong></h5><br><p>Simples e prático display LCD com botões e indicadores luminosos.<br> RS485 Integrado<br> datalogger Wireless incluso<br> USB Update</p><br><h5><strong> DIMENSIONAMENTO PARA INSTALAÇÃO DOS PAINEIS </strong></h5><br><p>Área minima necessária - #AREA# m²<br> Peso sobre o telhado - 18Kg/m² (com estrutura) <br> 1 arranjo de 4 Painéis em série MPPT1<br> Cabos Solares com proteção UV de 6mm<br> Conectores MC4 com proteção UV e resistência a amoníaco (conforme a DLG) 1500h 70C/70% RH, 750ppm</p><br><h5>Gere sua própria energia com o Gerador Solar Fotovoltaico Grid-Tie ou conectado à rede.</h5><br><p><font color=red> ***Reduza sua conta de energia </font> pagando somente a tarifa de manutenção da operadora. <br> O gerador de energia fotovoltaico é um dispositivo que converte a energia do sol em energia elétrica para ser usada em sua casa ou empresa. Com o aumento da conta de luz e do aquecimento global causado pelo consumo exagerado de combustíveis fósseis, o gerador fotovoltaico está se tornando cada vez mais uma excelente opção para produzir a sua própria energia elétrica com a Luz do Sol</p><br><h5><strong> Qual é a diferença entre kW e kWh nos geradores?  </strong></h5><br><h5><strong> kW </strong>  capacidade máxima de produção <strong> kWh </strong>  é a quantidade de energia produzida/consumida por hora. </h5><br><p>Ex: Se os seus painéis solares fotovoltaicos produzirem continuamente um total de 1 kW por um período de 60 minutos, então você terá produzido 1 kWh de energia. Os valores de irradiação solar global incidente em qualquer região do território brasileiro (4200-6700 kWh/m2) são superiores aos da maioria dos países da União Europeia, como Alemanha (900-1250 kWh/m2), França (900-1650kWh/m2) e Espanha (1200-1850 kWh/m2).</p><br><p>Atenção os geradores tem sua capacidade de geração de acordo com incidência de irradiação solar e a correta instalação, os dados de geração estão baseados no mapa* de radiação global horizontal média anual do Brasil.</p><br><h5><strong> Quanto esse gerador pode gerar de energia? </strong></h5><br><h5><strong> Exemplo do Cálculo de Potência do Gerador Solar Fotovoltaico </strong></h5><br><h5><font color=red> Tamanho de Gerador - Kw * Incidência de irradiação Solar da regiões do Brasil por m2 - kWh/m² * 30 dias = Total de energia que poderá gerar por mês - KWh/ Mês </font></h5><br><h5><strong> ***SIMULAÇÃO*** baseada no índice de incidência de irradiação Solar da regiões do Brasil por m² </strong></h5><br><img src=https://download.aldo.com.br/energy/tabela-1-5.jpg border=0><br><br/><strong>O gerador de energia fotovoltaico de 1,5 kWp é composto por: </strong><br/>4 STAUBLI CONECTOR MC4 320016P0001-UR PV-KBT4/6II-UR ACOPLADOR FEMEA<br/>4 STAUBLI CONECTOR MC4 32.0017P0001-UR PV-KST4/6II-UR ACOPLADOR MACHO<br/>1 INVERSOR SOLAR REFUSOL 801P1K6100 1.6KW MONOFASICO 220V 1MPPT MONITORAMENTO WLAN<br/>1 STRING BOX CLAMPER 015097 QUADRO 2 ENTRADAS 2 SAIDAS 1000V (1 MPPT)<br/>4 PAINEL SOLAR TRINA TSM-DE08MII 375W HONEY 120 CEL. MONO PERC HALF CELL 20,5% EFICIENCIA<br/>50 CABO SOLAR CORDEIRO R50 CORTOX SOLAR FLEX 1KV 1500V C5 NBL 1X6,00 PRETO<br/>50 CABO SOLAR CORDEIRO R50 CORTOX SOLAR FLEX 1KV 1500V C5 NBL 1X6,00 VERMELHO<br><br><h5><strong> Regulamentação: </strong></h5><br><p>A RESOLUÇÃO NORMATIVA Nº 687, DE 24 DE NOVEMBRO DE 2015, Estabelece as condições gerais para o acesso de micro geração e geração distribuída (sistemas de energia solar e outros geradores de energia renovável) aos sistemas de distribuição de energia elétrica, o sistema de compensação (créditos de energia). Também é conhecida por lei de incentivo a energia solar.</p><br><p>LEI 13.169 06/10/15, <strong> Ficam reduzidas a zero as alíquotas </strong> da Contribuição para o PIS/Pasep e da Contribuição para Financiamentoda Seguridade Social - COFINS incidentes sobre a energia elétrica ativa fornecida pela distribuidora à unidade consumidora na quantidade correspondente à soma da energia elétrica ativa injetada na rede de distribuição pela mesma unidade consumidora com os créditos de energia ativa originados na própria unidade consumidora no mesmo mês, em meses anteriores ou em outra unidade consumidora do mesmo titular, nos termos do Sistema de Compensação de Energia Elétrica para micro geração e geração distribuída, conforme regulamentação da Agência Nacional de Energia Elétrica - ANEEL.</p><br><img src=https://download.aldo.com.br/energy/isencao-icms.jpg border=0><br>")
